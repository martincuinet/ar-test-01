<html>
  <head>
    <meta charset="utf-8" />
    <title>Myself At Home</title>
    <meta name="description" content="" />
     
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.4/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
      AFRAME.registerComponent("model-opacity", {
        schema: {
          opacity: { type: "number", default: 0.5 }
        },
        init: function() {
          this.el.addEventListener("model-loaded", this.update.bind(this));
        },
        update: function() {
          var mesh = this.el.getObject3D("mesh");
          var data = this.data;
          if (!mesh) {
            return;
          }
          mesh.traverse(function(node) {
            if (node.isMesh) {
              console.log(node);
              node.material.opacity = data.opacity;
              node.material.transparent = data.opacity < 1.0;
              node.material.needsUpdate = true;
            }
          });
        }
      });
    </script>
  </head>
  <body style="margin : 0px; overflow: hidden;">
 
    <a-scene embedded arjs='sourceType: webcam; ' vr-mode-ui="enabled: false;">
           
      <a-marker type ="pattern" url = "./src/pattern-logo.patt">       
         <a-entity 
         position="0 0 0" 
         scale="1 1 1" 
         gltf-model= "./src/drunk.gltf" 
         animation-mixer 
         loop="true" 
         model-opacity=0.5
         >
          </a-entity> 

         <a-plane 
         position="-0.02 0 0" 
         rotation="-90 0 0" 
         scale="1 1 1" 
         material="color: blue;"
         >
        </a-plane>
      </a-marker>
      <a-entity camera ></a-entity>            
    </a-scene>
  </body>
</html>